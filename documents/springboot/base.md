# SpringBoot 基本構成

まず、Spring Boot がどのような思想で作られているかを理解することが、ファイル構成や「おまじない」のように見えるコードを理解する近道になります。

## Spring Boot の 3 つのコアコンセプト

Spring Boot は、従来の Spring Framework での開発を劇的に簡素化するために作られました。その中心には以下の 3 つの考え方があります。

1.  **コンベンション・オーバー・コンフィグレーション（Convention over Configuration / 設定より規約）**

    - 「一般的な Web アプリケーションなら、こういう設定が必要だよね」という"規約"（お決まりのパターン）を SpringBoot が内部に持っています。開発者は、その規約に従う限り、面倒な設定ファイルを大量に書く必要がありません。規約から外れたい部分だけを設定（application.properties など）で上書きします。

2.  **オートコンフィグレーション（Auto-Configuration / 自動設定）**

    - プロジェクトに追加されたライブラリ（pom.xml の依存関係）を検知して、必要な設定を自動的に行ってくれる仕組みです。例えば、spring-boot-starter-web を追加すれば、Web サーバー（Tomcat）の起動やリクエストを処理する仕組みが自動で有効になります。spring-boot-starter-data-jpa を追加すれば、データベース接続の設定が自動で行われます。

3.  **組み込みサーバー（Embedded Server）**
    - 従来は、作成したアプリケーション（WAR ファイル）を別途インストールした Tomcat などの Web サーバーに配置（デプロイ）する必要がありました。SpringBoot は、アプリケーション自体に Web サーバー（デフォルトは Tomcat）を内蔵しています。これにより、java-jar コマンドだけで、どこでもアプリケーションを起動できるようになりました。

これらのコンセプトを念頭に、実際のプロジェクトのファイル構成を見ていきましょう。

## Spring Boot の標準的なプロジェクト構造

主要ファイルとディレクトリの役割

| パス                     | 役割                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| :----------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `pom.xml`                | プロジェクトの設計図 (Maven)。プロジェクトの基本情報（名前、バージョンなど）と、依存ライブラリ(`<dependencies>`) を定義します。Spring Boot では、spring-boot-starter-\* という特別な依存関係を追加するだけで、関連するライブラリが一式導入され、自動設定が有効になります。<br>・`spring-boot-starter-parent`:全ての Spring Boot プロジェクトの親。バージョン管理などを集約します。<br>・`spring-boot-starter-web`:Web アプリケーションを作るための基本セット（Tomcat サーバー、SpringMVC など）を提供します。<br>・`spring-boot-starter-data-jpa`: データベースアクセスを簡単にするための JPA (JavaPersistence API) と Hibernate を提供します。<br>・`spring-boot-maven-plugin`:実行可能な JAR ファイルをビルドするための Maven プラグインです。 |
| `src/main/java`          | Java のソースコードを格納するメインディレクトリです。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `com/example/demo/`      | パッケージ構造。Java の標準的な命名規則です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `DemoApplication.java`   | Spring Boot アプリケーションの起動クラス（エントリーポイント）。このクラスの main メソッドを実行することで、アプリケーションが起動します。<br>・`@SpringBootApplication`: このアノテーションが Spring Boot の魔法の鍵です。これは以下の 3 つのアノテーションをまとめたものです。<br> 1. @SpringBootConfiguration: このクラスが設定クラスであることを示します。<br> 2. @EnableAutoConfiguration: pom.xml の依存関係を見て、必要な設定を自動的に行います。<br> 3. @ComponentScan: このクラスと同じパッケージ（com.example.demo）およびそのサブパッケージ内にある@Component, @Service, @RestController などのアノテーションが付いたクラスを自動的にスキャンし、Spring の管理対象（Bean）として登録します。                                          |
| `src/main/resources`     | リソースファイルを格納するディレクトリ。Java のコード以外のファイル（設定ファイル、HTML テンプレート、静的ファイルなど）はここに置きます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `application.properties` | アプリケーションの設定ファイル。データベースの接続情報、サーバーのポート番号、ログのレベルなど、アプリケーションの動作をカスタマイズするための設定を記述します。key=value 形式で記述します。（application.yml という YAML 形式もよく使われます）<br>例: `server.port=8088` と書けば、サーバーのポートが `8080` から `8088` に変更されます。                                                                                                                                                                                                                                                                                                                                                                                                      |
| `static/`                | 静的コンテンツを置くディレクトリ。画像、CSS、JavaScript ファイルなどをここに置くと、Web サーバーのルートパスから直接アクセスできるようになります。（例: static/image.png は `http://localhost:8080/image.png` でアクセス可能）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `templates/`             | テンプレートファイルを置くディレクトリ。サーバーサイドで動的に HTML を生成する場合（`Thymeleaf` など）に使います。今回の TODO アプリのような、フロントエンドとバックエンドが分離した SPA 構成では、このディレクトリはあまり使いません。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `src/test/java`          | テストコードを格納するディレクトリ。@SpringBootTest アノテーションを使うことで、本番に近い環境でテストを実行できます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |

## まとめ

1.  `pom.xml` で使いたい機能 (starter) を宣言する。
2.  Spring Boot がそれを検知し、`@SpringBootApplication` の力で自動的に設定を行う (オートコンフィグレーション)。
3.  `main`メソッドを実行するだけで、Web サーバーが起動し、アプリケーションが動き出す。
4.  開発者は、`com.example.demo` パッケージ以下に、ビジネスロジック（@RestController など）を記述することに集中できる。
5.  細かい動作の変更は `application.properties` で行う。

このように、SpringBoot は「設定より規約」と「自動設定」の力で、開発者が本質的なコードの記述に集中できる環境を提供してくれます。

ここからさらに、`@RestController` や `@Service` といった、具体的なアプリケーションコードで使われるアノテーションの役割について掘り下げていくと、より理解が深まるかと思います。
